= rep_interchange

integrating `rep_lang` & Holochain.

== submodules

either:

[source]
----
git clone --recurse-submodules $URL
----

or, after cloning:

[source]
----
git submodule update --init
----

== entering dev environment

[source]
----
nix-shell
----

alternately, use https://github.com/nix-community/lorri[`lorri`] and https://github.com/direnv/direnv[`direnv`] to manage tooling and shell environment transparently.

== building & running

building:

[source]
----
# perhaps this can go in package.json?
npm install

npm run fe:build
npm run hc:build
npm run hc:pack
----

running:

[source]
----
npm run fe:run
npm run hc:run
----

=== running with multiple conductors

[source]
----
# perform above build steps
npm run hc:clean

# terminal 1-1
hc sandbox -f=9009 generate happs/rep_interchange -r=9999 network mdns

# terminal 1-2
cargo run --bin rlp -- -f 9009 -p 9999 2> /tmp/rlp1.log

# terminal 2-1
hc sandbox -f=9008 generate happs/rep_interchange -r=9998 network mdns

# terminal 2-2
cargo run --bin rlp -- -f 9008 -p 9998 2> /tmp/rlp2.log
----

create an IE in terminal 1-2 and see it appear in terminal 2-2.

== sweettest tests

[source]
----
$ npm run build
$ npm run pack

# INFO
# cargo test depends on having the .happ around to be installed.
# this is due to Holochain having a high degree of "dynamism" in how it runs happs.
# I don't think we can do anything more "compile time" ish instead...
# in CI, for later, we will need to make sure the main build completes and the
# artifacts are available to the test suite...
$ cargo test
----
